(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{113:function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"d",function(){return r}),a.d(t,"a",function(){return o}),a.d(t,"e",function(){return c}),a.d(t,"b",function(){return l});var n=function(e){return e.dashboardinfo},r=function(e){return e.dashboardlogs},o=function(e){return e.alumnos},c=function(e){return e.profesor},l=function(e){return e.courses}},129:function(e,t,a){"use strict";var n=a(13),r=a(14),o=a(16),c=a(15),l=a(17),s=a(0),i=a.n(s),u=a(93),f=a(78),m=a.n(f),d=(a(94),a(97)),h=a(98),p=a.n(h),E=(a(99),function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.logs;return i.a.createElement(u.c,{className:"docu"},i.a.createElement(u.a,null,i.a.createElement(u.d,{size:"A4",style:d.a.body},i.a.createElement(u.b,{style:d.a.image,src:p.a}),i.a.createElement(u.f,{style:d.a.textTitle},"Tutor: ",e[e.length-1].userName),i.a.createElement(u.f,{style:d.a.textTitle},"Curso:  ",e[e.length-1].courseName),i.a.createElement(u.g,{style:d.a.contentData},i.a.createElement(u.g,{style:[{fontSize:12,width:133}]},i.a.createElement(u.f,{style:d.a.text},"Fecha")),i.a.createElement(u.g,{style:[{fontSize:12,width:133}]},i.a.createElement(u.f,{style:d.a.text},"No. de accesos")),i.a.createElement(u.g,{style:[{fontSize:12,width:133}]},i.a.createElement(u.f,{style:d.a.text},"Fecha")),i.a.createElement(u.g,{style:[{fontSize:12,width:133}]},i.a.createElement(u.f,{style:d.a.text},"No. de accesos"))),i.a.createElement(u.g,{style:d.a.content},e.map(function(t,a){if(a!=e.length-1)return i.a.createElement(u.g,{style:[d.a.dataBlock,{height:30}]},i.a.createElement(u.g,{style:[d.a.textData,{fontSize:7,width:133}]},i.a.createElement(u.f,{style:[d.a.text]},null!=t.timecreated?m.a.unix(t.timecreated).format("LL"):"Sin Actividad")),i.a.createElement(u.g,{style:[d.a.textData,{fontSize:7,width:133}]},i.a.createElement(u.f,{style:[d.a.text]},null!=t.timecreated?"".concat(t.count," veces"):"0")))})))))}}]),t}(i.a.Component));t.a=E},169:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a(7),r=a(851),o=a(89),c=a(90),l=Object(r.a)(n.f,Object(o.a)(c.e+"/"+n.a))},174:function(e,t){},175:function(e,t){},176:function(e,t){},177:function(e,t){},251:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a(7),r=a(851),o=a(89),c=a(90),l=Object(r.a)(n.g,Object(o.a)(c.e+"/"+n.h))},257:function(e,t,a){"use strict";var n=a(13),r=a(14),o=a(16),c=a(15),l=a(17),s=a(0),i=a.n(s),u=a(93),f=a(78),m=a.n(f),d=(a(94),a(97)),h=a(98),p=a.n(h),E=(a(99),function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(o.a)(this,Object(c.a)(t).call(this))).state={profesor:""},e}return Object(l.a)(t,e),Object(r.a)(t,[{key:"showCourses",value:function(e,t){var a=0;return e.courses.map(function(n,r){return null!=n.last?a+=n.count:a+=0,"nombre"==t?i.a.createElement(u.f,{style:[d.a.textData,{fontSize:6,textAlign:"left"}]},r+1+") "+n.fullname+"\n"):"first"==t?i.a.createElement(u.f,{style:[d.a.textData,{fontSize:6,textAlign:"left"}]},null!=n.first?m.a.unix(n.first).format("LL")+"\n":"sin ingreso\n"):"last"==t?i.a.createElement(u.f,{style:[d.a.textData,{fontSize:6,textAlign:"left"}]},null!=n.last?m.a.unix(n.last).format("LL")+"\n":"sin ingreso\n"):"count"==t?i.a.createElement(u.f,{style:[d.a.textData,{fontSize:6,textAlign:"center",fontWwight:"bold"}]},null!=n.last?n.count+"\n":"0\n",i.a.createElement(u.f,{style:[d.a.textData,{fontSize:6,textAlign:"center",fontWwight:"bold"}]},r+1==e.courses.length?"Total: ".concat(a):"")):"total"==t?parseInt(a):void 0})}},{key:"render",value:function(){var e=this,t=this.props.logs;console.log("logs"),console.log(t);var a=0;return console.log(t),i.a.createElement(u.c,{className:"docu"},i.a.createElement(u.a,null,i.a.createElement(u.d,{size:"A4",style:d.a.body},i.a.createElement(u.b,{style:d.a.image,src:p.a}),i.a.createElement(u.g,{style:d.a.contentData},i.a.createElement(u.g,{style:[{fontSize:7,width:40}]},i.a.createElement(u.f,{style:d.a.text},"No.")),i.a.createElement(u.g,{style:[{fontSize:7,width:90}]},i.a.createElement(u.f,{style:d.a.text},"NOMBRE DEL TUTOR")),i.a.createElement(u.g,{style:[{fontSize:7,width:160}]},i.a.createElement(u.f,{style:d.a.text},"CURSO/MATERIA")),i.a.createElement(u.g,{style:[{fontSize:7,width:80}]},i.a.createElement(u.f,{style:d.a.text},"PRIMER INGRESO")),i.a.createElement(u.g,{style:[{fontSize:7,width:90}]},i.a.createElement(u.f,{style:d.a.text},"\xdaLTIMO INGRESO")),i.a.createElement(u.g,{style:[{fontSize:7,width:90}]},i.a.createElement(u.f,{style:d.a.text},"TOTAL ACCESOS"))),i.a.createElement(u.g,{style:d.a.content},t.map(function(n,r){var o=e.showCourses(n,"total");return a+=o[n.courses.length-1],i.a.createElement(u.g,{style:r%2==0?[d.a.dataBlock,{height:76.5}]:[d.a.dataBlockback,{height:76.5}]},i.a.createElement(u.g,{style:[d.a.textData,{fontSize:7,width:40}]},i.a.createElement(u.f,{style:d.a.text},r+1)),i.a.createElement(u.g,{style:[d.a.textData,{width:98,textAlign:"left !important"}]},i.a.createElement(u.f,{style:[d.a.text,{fontSize:8}]},n.nombre)),i.a.createElement(u.g,{style:[d.a.textData,{fontSize:7,width:160,paddingLeft:7,paddingRight:7}]},i.a.createElement(u.f,{style:d.a.text},e.showCourses(n,"nombre"))),i.a.createElement(u.g,{style:[d.a.textData,{fontSize:7,width:80,paddingLeft:10}]},i.a.createElement(u.f,{style:d.a.text},e.showCourses(n,"first"))),i.a.createElement(u.g,{style:[d.a.textData,{fontSize:7,width:90,paddingLeft:18}]},i.a.createElement(u.f,{style:d.a.text},e.showCourses(n,"last"))),i.a.createElement(u.g,{style:[d.a.textData,{fontSize:7,width:88}]},i.a.createElement(u.f,{style:d.a.text},e.showCourses(n,"count")),i.a.createElement(u.f,{style:d.a.text},r+1==t.length?"Total: ".concat(a):"")))})),i.a.createElement(u.f,{style:d.a.pageNumber,render:function(e){var t=e.pageNumber,a=e.totalPages;return"".concat(t," / ").concat(a)},fixed:!0}))))}}]),t}(i.a.Component));t.a=E},684:function(e,t,a){"use strict";var n=a(4),r=a(11),o=a(65),c=a.n(o),l=a(0),s=a.n(l),i=a(67),u=s.a.forwardRef(function(e,t){var a=e.bsPrefix,o=e.fluid,l=e.as,u=void 0===l?"div":l,f=e.className,m=Object(r.a)(e,["bsPrefix","fluid","as","className"]),d=Object(i.b)(a,"container");return s.a.createElement(u,Object(n.a)({ref:t},m,{className:c()(f,o?d+"-fluid":d)}))});u.displayName="Container",u.defaultProps={fluid:!1},t.a=u},837:function(e,t,a){"use strict";a.r(t);var n=a(13),r=a(14),o=a(16),c=a(15),l=a(17),s=a(0),i=a.n(s),u=a(124),f=a(95),m=a(684),d=a(134),h=a(318),p=a(847),E=a(843),g=a(92),y=a(29),x=a(125),b=a.n(x),v=a(126),S=a.n(v),w=(a(127),a(31)),N=(a(169),a(251)),O=a(76),j=(i.a.Component,a(113)),C=a(153),D=a.n(C),k=(a(156),a(157)),z=a.n(k),L=a(158),A=a.n(L),P=a(89),T=a(90),R=a(257),B=a(129),F=a(840),M=a(78),I=a.n(M),U=(a(94),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).closePDFmodal=function(){a.setState({totalLogsState:[]}),a.setState({pdfLogs:[]}),a.setState({open:!1})},a.handleDataChange=function(e){var t=e.dataSize;a.setState({profesorCount:t}),console.log(a.state.profesorCount)},a.state={open:!1,logsState:[],totalLogsState:[],pdfLogs:[],profesorCount:0,userType:3},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"openPDFmodal",value:function(e,t,a){var n=this;(this.setState({open:!0}),0==e)?Object(P.d)(T.d,0,this.state.userType).then(function(e){return n.setState({totalLogsState:e})}):Object(P.e)(T.d,t,this.state.userType,e,a).then(function(e){return n.setState({pdfLogs:e})})}},{key:"componentDidMount",value:function(){0==this.props.profesores.length&&this.props.fetchProfesor()}},{key:"showProfesores",value:function(){var e=this;var t=[{dataField:"firstname",text:" ",headerFormatter:function(e,t){return i.a.createElement("h5",{className:"card-title headerbtable col-xs-12 col-md-6 col-lg-4"},".")},formatter:function(e,t){return i.a.createElement(u.a,null,i.a.createElement(f.a,{xs:"1"},i.a.createElement("img",{className:"rounded-circle",style:{width:"30px"},src:S.a,alt:"Profesor"})),i.a.createElement(f.a,null,i.a.createElement("strong",null,"".concat(t.lastname," ")),t.firstname),i.a.createElement(f.a,{className:"format-expanse-user"},i.a.createElement("h5",null,"\xdaltimo Acceso a moodle:"),i.a.createElement("h6",{className:"row-text-bt"},i.a.createElement("i",{className:"fa fa-circle text-c-green f-10 m-r-15"}),t.lastaccess.length>=2?I.a.unix(t.lastaccess).format("LL"):"Sin actividad"," ")))},align:"left",classes:"columnbtable",fullUserName:""}],a={onlyOneExpanding:!0,showExpandColumn:!1,expandColumnPosition:"right",parentClassName:"parent-expand-foo",onExpand:function(t,a,n,r){e.state.logsState,e.state.fullUserName;var o="".concat(t.firstname," ").concat(t.lastname);!0===a&&Object(P.e)(T.d,t.id,3,0,"","").then(function(t){return e.setState({logsState:t,fullUserName:o})})},renderer:function(t){return i.a.createElement(m.a,null,e.state.logsState.map(function(e,t,a){if(a.length-1==t)return i.a.createElement(u.a,{className:"justify-content-md-center"},i.a.createElement(f.a,{className:"total-registros",xs:6,sm:6,md:4},i.a.createElement("h3",null,i.a.createElement("strong",null,"".concat(e.total," ")),"Registros de actividad")),0==e.total?i.a.createElement(f.a,{className:"total-registros",xs:6,sm:6,md:{span:1,offset:1}},i.a.createElement("h3",null,"Inactivo")):i.a.createElement(f.a,{className:"total-registros",xs:6,sm:6,md:{span:1,offset:1}},i.a.createElement("h3",null,"Activo")))}),i.a.createElement(u.a,{className:"justify-content-sm-center"},e.state.logsState.map(function(t){return i.a.createElement(f.a,{xs:12,sm:6,md:4,key:t.courseid},i.a.createElement(d.a,{key:"".concat(t.courseid,"cardus"),className:"log-user-card"},i.a.createElement(d.a.Body,{key:"".concat(t.courseid,"cardbody")},i.a.createElement(u.a,null,i.a.createElement(f.a,{className:"log-count"},i.a.createElement("p",{key:"".concat(t.courseid,"pcount")},null!==t.first?t.count:0),i.a.createElement("p",{className:"log-count-title",key:"".concat(t.courseid,"pcount-tit")},"INTERACCIONES")),i.a.createElement(f.a,{className:"log-date"},i.a.createElement(f.a,{className:"title-date"},i.a.createElement("h6",{key:"".concat(t.courseid,"pfatitle")},"Primer"),i.a.createElement("p",{key:"".concat(t.courseid,"pfa")},null!=t.first?I.a.unix(t.first).format("LL"):"Sin actividad")),i.a.createElement(f.a,{className:"title-date"},i.a.createElement("h6",{key:"".concat(t.courseid,"platitle")},"\xdaltimo"),i.a.createElement("p",{key:"".concat(t.courseid,"pfa")},null!=t.last?I.a.unix(t.last).format("LL"):"Sin actividad")))),i.a.createElement("hr",null),i.a.createElement(u.a,{className:"log-course-catg"},i.a.createElement(f.a,{xs:"12",key:"".concat(t.courseid,"pcateg")},i.a.createElement("span",null,"DIPLOMADO: "),t.name),i.a.createElement(f.a,{xs:"12",key:"".concat(t.courseid,"pfnam")},i.a.createElement("span",null,"CURSO: "),t.fullname),i.a.createElement(f.a,{xs:"12",className:"log-pdf"},i.a.createElement(h.a,{variant:"outline-secondary",size:"sm",block:!0,onClick:function(){return e.openPDFmodal(t.courseid,t.userid,e.state.fullUserName)},disabled:e.state.open},i.a.createElement(g.a,{text:"PDF"})))))))})))}};if(this.props.profesores[0])return i.a.createElement(u.a,{className:"tableUsers"},i.a.createElement(f.a,{xs:"12"},i.a.createElement(D.a,{keyField:"id",onDataSizeChange:this.handleDataChange,data:this.props.profesores[0],columns:t,condensed:!0,expandRow:a,bordered:!1,pagination:z()(),noDataIndication:"No hay profesores",filter:A()()})))}},{key:"render",value:function(){var e=this;return i.a.createElement(y.a,null,i.a.createElement(p.a,{show:this.state.open,onHide:this.closePDFmodal,dialogClassName:"modal-pdf"},i.a.createElement(p.a.Header,{closeButton:!0},i.a.createElement(p.a.Title,null,"Concentrado de profesores")),i.a.createElement(p.a.Body,null,this.state.totalLogsState.length>0?i.a.createElement(R.a,{logs:this.state.totalLogsState}):this.state.pdfLogs.length>0?i.a.createElement(B.a,{logs:this.state.pdfLogs}):i.a.createElement(u.a,{className:"justify-content-md-center"},i.a.createElement(f.a,{xs:"12",class:"spinner_col"},i.a.createElement(E.a,{animation:"grow",variant:"info"}),"Cargando..."))),i.a.createElement(p.a.Footer,null,i.a.createElement(h.a,{variant:"secondary",onClick:this.closePDFmodal},"Cerrar"))),i.a.createElement(u.a,{className:"header-container"},i.a.createElement(f.a,{xs:"6",sm:"3",className:"header-new-format"},"PROFESORES "),i.a.createElement(f.a,{xs:"2",sm:"1",className:"header-count"},this.state.profesorCount>0?this.state.profesorCount:this.props.profesores.length>0?this.props.profesores[0].length:0),i.a.createElement(f.a,null,i.a.createElement(h.a,{variant:"outline-primary",onClick:function(){return e.openPDFmodal(0,0,"")},disabled:this.state.open},i.a.createElement(g.a,{text:"PDF"})))),i.a.createElement(u.a,null),i.a.createElement(u.a,null,i.a.createElement(f.a,{md:12,xl:12},i.a.createElement(d.a,null,i.a.createElement(d.a.Body,{className:"px-0 py-2"},this.showProfesores())))))}}]),t}(i.a.Component));t.default=Object(F.a)(Object(w.b)(function(e){return{alumnos:Object(j.a)(e),profesores:Object(j.e)(e)}},function(e){return{fetchProfesor:function(){return e(Object(N.a)())}}})(U))},89:function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"d",function(){return c}),a.d(t,"e",function(){return l}),a.d(t,"c",function(){return s}),a.d(t,"b",function(){return i});var n=a(78),r=a.n(n),o=function(e){return function(){return fetch(e).then(function(e){return e.json()})}},c=function(e,t,a,n){return fetch("".concat(e,"/").concat(t,"/").concat(a,"/").concat(n)).then(function(e){return e.json().then(function(e){var t=[],a=new Map,n=0,r=-1,o=0,c=0,l=0,s=new Map,i=!0,u=!1,f=void 0;try{for(var m,d=e[Symbol.iterator]();!(i=(m=d.next()).done);i=!0){var h=m.value;a.has(h.id_user+h.courseid)?(o+=1,t[r].courses[n].count=o+1):(a.set(h.id_user+h.courseid,!0),o=0,s.has(h.id_user)?(n+=1,t[r].courses.push({fullname:h.fullname,count:o+1,first:0,last:0})):(s.set(h.id_user,!0),n=0,r+=1,t.push({nombre:h.firstname+" "+h.apellido,courses:[{fullname:h.fullname,count:o+1,first:0,last:0}]}))),(c>h.timecreated||0===c||0===t[r].courses[n].first)&&(c=h.timecreated,t[r].courses[n].first=h.timecreated),(l<h.timecreated||0===l||0===t[r].courses[n].last)&&(l=h.timecreated,t[r].courses[n].last=h.timecreated)}}catch(p){u=!0,f=p}finally{try{i||null==d.return||d.return()}finally{if(u)throw f}}return t})}).catch(function(e){return console.log("Error "+e)})},l=function(e,t,a,n,o){return fetch("".concat(e,"/").concat(t,"/").concat(a,"/").concat(n)).then(function(e){return e.json().then(function(e){if(0==n){var t=[],a=0,c=-1,l=0,s=0,i=0,u=new Map,f=!0,m=!1,d=void 0;try{for(var h,p=e[Symbol.iterator]();!(f=(h=p.next()).done);f=!0){var E=h.value;u.has(E.courseid)?(i+=1,t[c].total=i,a+=1,t[c].count=a+1):(u.set(E.courseid,!0),a=0,null!=E.timecreated?i+=1:i+=0,c+=1,t.push({courseid:E.courseid,fullname:E.fullname,userid:E.userid,name:E.name,count:a+1,total:i,first:0,last:0})),(l>E.timecreated||0===l||0===t[c].first)&&(l=E.timecreated,t[c].first=E.timecreated),(s<E.timecreated||0===s||0===t[c].last)&&(s=E.timecreated,t[c].last=E.timecreated)}}catch(C){m=!0,d=C}finally{try{f||null==p.return||p.return()}finally{if(m)throw d}}return t}var g=[],y=0,x=-1,b=new Map,v=!0,S=!1,w=void 0;try{for(var N,O=e[Symbol.iterator]();!(v=(N=O.next()).done);v=!0){var j=N.value;b.has(r.a.unix(j.timecreated).format("YYYY-MM-DD"))?(y+=1,g[x].count=y):(b.set(r.a.unix(j.timecreated).format("YYYY-MM-DD"),!0),y=null!=j.timecreated?1:0,x+=1,g.push({timecreated:j.timecreated,count:y}))}}catch(C){S=!0,w=C}finally{try{v||null==O.return||O.return()}finally{if(S)throw w}}return g.push({courseName:e[0].fullname,userName:o}),console.log("logs logsJson"),console.log(e),g})}).catch(function(e){return console.log("Error "+e)})},s=function(e){return fetch("".concat(e)).then(function(e){return e.json().then(function(e){return e})}).catch(function(e){return console.log("Error "+e)})},i=function(e,t,a){return fetch("".concat(e,"/").concat(t,"/").concat(a)).then(function(e){return e.json().then(function(e){var t=[],a=!0,n=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var l=o.value;t.push(l.userid)}}catch(s){n=!0,r=s}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}return t})}).catch(function(e){return console.log("Error "+e)})}},90:function(e,t,a){"use strict";a.d(t,"e",function(){return r}),a.d(t,"b",function(){return o}),a.d(t,"c",function(){return c}),a.d(t,"d",function(){return l}),a.d(t,"a",function(){return s}),a.d(t,"f",function(){return i});var n="http://campus-virtuales.com/sigem/public/",r="".concat(n,"usuarios"),o="".concat(n,"basicinfo"),c="".concat(n,"courselogs"),l="".concat(n,"logs"),s="".concat(n,"courses"),i="".concat(n,"courseuser")},92:function(e,t,a){"use strict";var n=a(13),r=a(14),o=a(16),c=a(15),l=a(17),s=a(0),i=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.text;return e.charAt(0).toUpperCase()+e.slice(1)}}]),t}(a.n(s).a.Component);t.a=i},97:function(e,t,a){"use strict";var n=a(93).e.create({body:{paddingTop:35,paddingBottom:40.9,paddingHorizontal:19},content:{flexDirection:"row",flexWrap:"wrap"},contentData:{flexDirection:"row",backgroundColor:"#ebe8e1",flexWrap:"wrap",border:"1 solid #3f4d67",paddingBottom:5},block:{height:30,width:94},text:{marginTop:5,textAlign:"center",fontSize:8},textData:{verticalAlign:"baseline",marginTop:5,borderBottom:"1px solid blue !important",borderBottomWidth:"5px",borderBottomStyle:"solid"},dataBlock:{flexDirection:"row",flexWrap:"wrap",textAlign:"center"},dataBlockback:{flexDirection:"row",flexWrap:"wrap",textAlign:"center",backgroundColor:"#d1cec6"},image:{width:"100%",backgroundColor:"white",height:56.5},pageNumber:{position:"absolute",fontSize:6,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},textTitle:{fontSize:10}});t.a=n},98:function(e,t,a){e.exports=a.p+"static/media/concentrado_tutores.97fa793c.jpg"},99:function(e,t,a){e.exports=a.p+"static/media/vasijas_final.b276690b.jpg"}}]);
//# sourceMappingURL=18.088cc359.chunk.js.map